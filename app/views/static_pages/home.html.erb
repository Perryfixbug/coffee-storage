<!-- app/views/static_pages/home.html.erb -->
<div class="space-y-10">
  <!-- üß≠ Header -->
  <div>
    <h1 class="text-3xl font-bold text-gray-800 mb-1">T·ªïng quan h·ªá th·ªëng</h1>
    <p class="text-gray-500">D·ªØ li·ªáu c·∫≠p nh·∫≠t trong 7 ng√†y g·∫ßn nh·∫•t</p>
  </div>

  <!-- üìä Th·ªëng k√™ nhanh -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
    <div class="bg-white border border-gray-200 rounded-xl p-5 shadow-sm">
      <div class="text-sm text-gray-500">T·ªïng s·∫£n ph·∫©m</div>
      <div class="text-3xl font-semibold text-green-600 mt-1"><%= @total_products %></div>
    </div>

    <div class="bg-white border border-gray-200 rounded-xl p-5 shadow-sm">
      <div class="text-sm text-gray-500">T·ªïng ƒë·∫°i l√Ω</div>
      <div class="text-3xl font-semibold text-gray-800 mt-1"><%= @total_agencies %></div>
    </div>

    <div class="bg-white border border-gray-200 rounded-xl p-5 shadow-sm">
      <div class="text-sm text-gray-500">T·ªïng nh√¢n vi√™n</div>
      <div class="text-3xl font-semibold text-gray-800 mt-1"><%= @total_users %></div>
    </div>

    <div class="bg-white border border-gray-200 rounded-xl p-5 shadow-sm">
      <div class="text-sm text-gray-500">Gi√° tr·ªã t·ªìn kho</div>
      <div class="text-2xl font-semibold text-gray-800 mt-1"><%= number_to_currency(@total_inventory_value, unit: "‚Ç´", precision: 0) %></div>
    </div>

    <div class="bg-white border border-gray-200 rounded-xl p-5 shadow-sm">
      <div class="text-sm text-gray-500">ƒê∆°n nh·∫≠p (7 ng√†y)</div>
      <div class="text-3xl font-semibold text-blue-600 mt-1"><%= @total_import_orders %></div>
    </div>

    <div class="bg-white border border-gray-200 rounded-xl p-5 shadow-sm">
      <div class="text-sm text-gray-500">ƒê∆°n xu·∫•t (7 ng√†y)</div>
      <div class="text-3xl font-semibold text-orange-500 mt-1"><%= @total_export_orders %></div>
    </div>
  </div>

  <!-- ‚ö†Ô∏è S·∫£n ph·∫©m s·∫Øp h·∫øt -->
  <div>
    <h2 class="text-xl font-semibold text-gray-800 mb-3">S·∫£n ph·∫©m s·∫Øp h·∫øt h√†ng</h2>
    <% if @low_stock_products.any? %>
      <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-200 rounded-lg text-sm">
          <thead class="bg-gray-50 text-gray-600">
            <tr>
              <th class="px-4 py-2 text-left">M√£</th>
              <th class="px-4 py-2 text-left">T√™n</th>
              <th class="px-4 py-2 text-right">S·ªë l∆∞·ª£ng</th>
              <th class="px-4 py-2 text-right">Gi√° / ƒêV</th>
            </tr>
          </thead>
          <tbody>
            <% @low_stock_products.each do |p| %>
              <tr class="border-t hover:bg-gray-50">
                <td class="px-4 py-2"><%= p.product_code %></td>
                <td class="px-4 py-2"><%= p.name %></td>
                <td class="px-4 py-2 text-right text-red-600 font-medium"><%= p.quantity %> <%= p.unit %></td>
                <td class="px-4 py-2 text-right"><%= number_to_currency(p.price_per_unit, unit: "‚Ç´", precision: 0) %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    <% else %>
      <p class="text-gray-500 italic">Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o s·∫Øp h·∫øt h√†ng.</p>
    <% end %>
  </div>

  <!-- üßæ Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <div>
      <h2 class="text-xl font-semibold text-gray-800 mb-3">ƒê∆°n nh·∫≠p g·∫ßn ƒë√¢y</h2>
      <% if @recent_imports.any? %>
        <ul class="divide-y divide-gray-100 bg-white border border-gray-200 rounded-lg">
          <% @recent_imports.each do |order| %>
            <li class="p-3 hover:bg-gray-50 flex justify-between items-center">
              <span># <%= order.id %> ‚Äî <%= order.agency&.name || "Kh√¥ng r√µ ƒë·∫°i l√Ω" %></span>
              <span class="text-gray-500 text-sm"><%= l(order.created_at, format: :short) %></span>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p class="text-gray-500 italic">Kh√¥ng c√≥ ƒë∆°n nh·∫≠p g·∫ßn ƒë√¢y.</p>
      <% end %>
    </div>

    <div>
      <h2 class="text-xl font-semibold text-gray-800 mb-3">ƒê∆°n xu·∫•t g·∫ßn ƒë√¢y</h2>
      <% if @recent_exports.any? %>
        <ul class="divide-y divide-gray-100 bg-white border border-gray-200 rounded-lg">
          <% @recent_exports.each do |order| %>
            <li class="p-3 hover:bg-gray-50 flex justify-between items-center">
              <span># <%= order.id %> ‚Äî <%= order.agency&.name || "Kh√¥ng r√µ ƒë·∫°i l√Ω" %></span>
              <span class="text-gray-500 text-sm"><%= l(order.created_at, format: :short) %></span>
            </li>
          <% end %>
        </ul>
      <% else %>
        <p class="text-gray-500 italic">Kh√¥ng c√≥ ƒë∆°n xu·∫•t g·∫ßn ƒë√¢y.</p>
      <% end %>
    </div>
  </div>

  <!-- üìà Link xem th·ªëng k√™ -->
  <div class="text-center pt-8">
    <%= link_to "Xem th·ªëng k√™ chi ti·∫øt", stat_path,
          class: "inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition" %>
  </div>
</div>
